<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="2248 Puzzle Game Clone">
    <title>2248</title>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/png" href="img/Logo_icon.png">
    <script src="script.js" defer></script>
</head>
<body>

    <section id="start-screen" class="start-overlay">
        <div class="start-content">
            <h1>2248</h1>
            <p class="subtitle">Koble tallene, nå nye høyder</p>
            
            <div class="difficulty-menu">
                <button class="diff-btn" onclick="game.startGame('easy')">
                    <span class="diff-title">EASY</span>
                    <span class="diff-desc">5 x 8 rutenett</span>
                </button>
                <button class="diff-btn" onclick="game.startGame('medium')">
                    <span class="diff-title">MEDIUM</span>
                    <span class="diff-desc">5 x 7 rutenett</span>
                </button>
                <button class="diff-btn" onclick="game.startGame('hard')">
                    <span class="diff-title">HARD</span>
                    <span class="diff-desc">5 x 6 rutenett</span>
                </button>
            </div>
            
            <p class="start-info">Spillet lagres automatisk for hver vanskelighetsgrad.</p>
        </div>
    </section>

    <main class="app-container">
        
        <aside class="leaderboard-panel" aria-label="Toppliste">
            <h3>Toppliste</h3>
            <ul id="leaderboard-list">
                <li>Laster...</li>
            </ul>
        </aside>

        <section class="game-wrapper" aria-label="Spillområde">
            <header>
                <article class="score-container" aria-label="Nåværende poeng">
                    <span class="score-label">SCORE</span>
                    <output class="score-value" id="score-display">0</output>
                </article>
                
                <aside id="preview-container" class="preview-hidden" aria-hidden="true">
                    <span class="preview-label">SUM</span>
                    <span id="preview-value"></span>
                </aside>

                <div class="header-right">
                    <article class="score-container best-container" aria-label="Beste poengsum">
                        <span class="score-label">BESTE</span>
                        <output class="score-value" id="best-score-display">0</output>
                    </article>

                    <button class="restart-btn" type="button" onclick="game.requestBackToMenu()" aria-label="Meny">
                       <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round">
                            <line x1="19" y1="12" x2="5" y2="12"></line>
                            <polyline points="12 19 5 12 12 5"></polyline>
                        </svg>
                    </button>
                </div>
            </header>

            <div id="game-container">
                <svg id="connector-canvas" aria-hidden="true"></svg>
                <div class="grid" id="grid-element" aria-label="Rutenett for brikker">
                </div>
            </div>
        </section>
    </main>

    <dialog class="modal-overlay" id="highscore-modal" aria-modal="true" aria-labelledby="modal-title">
        <article class="modal-content">
            <h2 id="modal-title">Game Over!</h2>
            <p>Din poengsum: <span id="final-score">0</span></p>
            <label for="player-name" class="visually-hidden">Ditt kallenavn</label>
            <input type="text" id="player-name" placeholder="Ditt kallenavn" maxlength="15" autocomplete="off">
            <button type="button" onclick="game.submitHighscore()">Lagre Highscore</button>
            <p id="api-status" aria-live="polite"></p>
        </article>
    </dialog>

    <dialog class="modal-overlay" id="restart-modal" aria-modal="true" aria-labelledby="restart-title">
        <article class="modal-content">
            <h2 id="restart-title">Tilbake til meny?</h2>
            <p>Spillet ditt lagres automatisk, så du kan fortsette senere.</p>
            <div class="modal-buttons modal-buttons-column">
                <button class="btn-confirm" id="btn-save-menu">Gå til meny (Lagre spill)</button>
                <button class="btn-cancel" id="btn-reset-current" style="background: #e1b12c !important; color: #111;">Nullstill dette brettet</button>
                <button class="btn-cancel" id="btn-cancel-restart">Avbryt</button>
            </div>
        </article>
    </dialog>

    <dialog class="modal-overlay" id="resume-modal" aria-modal="true" aria-labelledby="resume-title">
        <article class="modal-content">
            <h2 id="resume-title">Fant lagret spill</h2>
            <p>Du har et påbegynt spill her. Vil du fortsette der du slapp?</p>
            <div class="modal-buttons modal-buttons-column">
                <button class="btn-confirm" id="btn-resume-game">Fortsett spill</button>
                <button class="btn-cancel" id="btn-new-game-override" style="background: #e1b12c !important; color: #111;">Start nytt spill</button>
                <button class="btn-cancel" id="btn-cancel-resume">Gå tilbake</button>
            </div>
        </article>
    </dialog>

</body>
</html>